[gd_scene load_steps=19 format=3 uid="uid://3b51eyxqlyy7"]

[ext_resource type="Script" path="res://scenes/levels/2_boss_fight/2_boss_fight.gd" id="1_oy3v5"]
[ext_resource type="Shader" path="res://shaders/water.gdshader" id="2_6o8j6"]
[ext_resource type="PackedScene" uid="uid://8gt3iwiycr8d" path="res://scenes/enemies/bosses/first_boss/first_boss.tscn" id="2_7ptwo"]
[ext_resource type="TileSet" uid="uid://dg06kfq5lp2r0" path="res://assets/graphic/Environment/boss_arena.tres" id="2_b1qy8"]
[ext_resource type="PackedScene" uid="uid://bonad1k04tdtq" path="res://scenes/player/player.tscn" id="3_c77s1"]
[ext_resource type="Texture2D" uid="uid://ieohhgxd5v1a" path="res://assets/graphic/VFX/foam.png" id="3_ibfjm"]
[ext_resource type="AudioStream" uid="uid://fu83gsut6u5h" path="res://assets/audio/music/plant_boss.mp3" id="5_dmkg8"]
[ext_resource type="Texture2D" uid="uid://dvso28av0p6sl" path="res://assets/graphic/VFX/leaf_particle.png" id="6_72271"]
[ext_resource type="Script" path="res://scenes/player/Camera2D.gd" id="8_bhp4l"]
[ext_resource type="Shader" path="res://shaders/Fog.gdshader" id="8_cy764"]
[ext_resource type="Texture2D" uid="uid://sbvegixwt7ap" path="res://assets/graphic/VFX/vignette.png" id="8_oq80l"]
[ext_resource type="Texture2D" uid="uid://babn1o3j867u" path="res://assets/graphic/VFX/noise.png" id="9_m2gtb"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_fwyeq"]
shader = ExtResource("2_6o8j6")
shader_parameter/foam_color = Color(0, 0.2, 0.258824, 1)
shader_parameter/vel_time = 0.1
shader_parameter/foam = ExtResource("3_ibfjm")

[sub_resource type="NavigationPolygon" id="NavigationPolygon_80xbw"]
vertices = PackedVector2Array(-2256, -1640, -2257, -1640, -1339, -1673, -432, -1845, -485, -2289, 552, -2270, 509, -1728, -2088, 2753, -2707, 2484, -2562, 2140, -2339, 2007, -165, 2178, -350, 2806, 2364, 1440, 2829, 1476, 2823, 2250, 2751, 2720, 2094, 2752, 1685, 2684, 1649, 2422, -2647, -793, -2682, -1578, -2124, 302, 1261, 2113, 2180, 1112, 563, 2060, -2017, 1058, 1086, -1647, 2292, -215, 2163, 309, 2803, -921, 2760, -321, 2357, -1672, 2803, -1436, -2613, 149, 2200, 781)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5, 6), PackedInt32Array(7, 8, 9, 10, 11, 12), PackedInt32Array(13, 14, 15, 16, 17, 18, 19), PackedInt32Array(20, 21, 0, 2, 22), PackedInt32Array(13, 19, 23, 24), PackedInt32Array(25, 11, 10, 26, 6, 27, 28, 29), PackedInt32Array(30, 31, 28, 27, 32, 33), PackedInt32Array(22, 34, 20), PackedInt32Array(22, 2, 3, 6, 26), PackedInt32Array(23, 25, 29, 35, 24)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2346.67, 2000, -2570, 2133.33, -2720, 2490, -2090, 2763.33, -343.333, 2816.67, -156.667, 2186.67, 563.333, 2070, 1256.67, 2123.33, 1640, 2426.67, 1676.67, 2693.33, 2093.33, 2763.33, 2760, 2730, 2833.33, 2250, 2840, 1466.67, 2370, 1430, 2190, 1110, 2210, 780, 2173.33, 310, 2300, -206.667, 2770, -313.333, 2813.33, -920, 2813.33, -1443.33, 2360, -1683.33, 1086.67, -1656.67, 520, -1736.67, 563.333, -2280, -496.667, -2300, -443.333, -1853.33, -1340, -1683.33, -2256.67, -1650, -2693.33, -1586.67, -2656.67, -793.333, -2623.33, 156.667, -2133.33, 310, -2026.67, 1056.67)])
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="Gradient" id="Gradient_jr40o"]
colors = PackedColorArray(0.133333, 0.6, 0.317647, 1, 0.34902, 0.603922, 0.639216, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_7yv1o"]
gradient = SubResource("Gradient_jr40o")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_glq4y"]
particle_flag_rotate_y = true
particle_flag_disable_z = true
emission_shape_scale = Vector3(60, 90, 1)
emission_shape = 1
emission_sphere_radius = 20.0
angle_max = 30.0
direction = Vector3(0, 0, 0)
initial_velocity_min = 753.33
initial_velocity_max = 753.33
gravity = Vector3(0, 0, 0)
scale_min = 0.0
scale_max = 0.3
color_ramp = SubResource("GradientTexture1D_7yv1o")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_bnix1"]
shader = ExtResource("8_cy764")
shader_parameter/opacity = 0.35
shader_parameter/speed_fog = 0.1
shader_parameter/noise_tex = ExtResource("9_m2gtb")

[node name="2BossFight" type="Node"]
script = ExtResource("1_oy3v5")

[node name="BG" type="Sprite2D" parent="."]
texture_repeat = 2
material = SubResource("ShaderMaterial_fwyeq")
position = Vector2(757, 491.5)
scale = Vector2(15.008, 11.444)
texture = ExtResource("8_oq80l")

[node name="TileMap" type="TileMap" parent="."]
scale = Vector2(0.3, 0.3)
tile_set = ExtResource("2_b1qy8")
format = 2
layer_0/tile_data = PackedInt32Array(-65534, 0, 2, -65533, 131072, 1, -65532, 196608, 1, 131071, 0, 3, 196607, 0, 3, 262143, 0, 4, 458751, 0, 2, 524287, 65536, 5, 65536, 196608, 2, 131072, 262144, 2, 196608, 65536, 4, 393216, 196608, 4, 458752, 131072, 5, 65537, 196608, 2, 131073, 196608, 2, 196609, 262144, 3, 262145, 65536, 3, 327681, 196608, 4, 458753, 131072, 5, 2, 196608, 2, 65538, 131072, 3, 131074, 131072, 3, 196610, 65536, 3, 262146, 65536, 3, 458754, 131072, 5, 3, 131072, 3, 65539, 196608, 4, 131075, 196608, 4, 196611, 65536, 3, 262147, 131072, 3, 327683, 196608, 4, 458755, 262144, 5, 4, 131072, 3, 65540, 196608, 4, 131076, 196608, 4, 196612, 196608, 4, 262148, 196608, 4, 327684, 131072, 3, 393220, 131072, 5, 5, 196608, 2, 65541, 65536, 3, 131077, 65536, 3, 196613, 131072, 3, 262149, 196608, 4, 327685, 196608, 4, 393221, 131072, 5, 131078, 131072, 3, 196614, 262144, 2, 262150, 131072, 3, 327686, 65536, 3, 393222, 65536, 4, 458758, 65536, 5, 65543, 131072, 3, 131079, 262144, 4, 196615, 327680, 3, 262151, 262144, 1, 458759, 131072, 5, 131080, 262144, 5, 458760, 262144, 5, 327687, 131072, 3, 393219, 262144, 4, 327682, 196608, 4, 327688, 327680, 3, 393217, 196608, 4, 393218, 65536, 3, 393223, 65536, 3, 65544, 327680, 3, 393224, 327680, 3, 262144, 0, 3, 327680, 65536, 1, 393215, 0, 1, 262152, 327680, 1, 65542, 196608, 4, 1, 65536, 2, 6, 65536, 2, 7, 65536, 2, 8, 327680, 2, 0, 65536, 2, 65535, 0, 2, -65531, 327680, 3, 65547, 0, 2, 131083, 0, 2, 196619, 0, 4, 196620, 131072, 5, 196621, 131072, 5, 196622, 131072, 5, 131084, 196608, 2, 13, 131072, 0, 14, 131072, 0, 393227, 458752, 4, 393228, 524288, 4, 458763, 458752, 5, 458764, 524288, 5, 65530, 458752, 4, 131066, 458752, 5, 65531, 524288, 4, 131067, 524288, 5, 393211, 458752, 4, 458747, 458752, 5, 393212, 524288, 4, 458748, 524288, 5, 65551, 196608, 2, 196623, 131072, 5, 15, 196608, 0, 65552, 327680, 2, 131088, 327680, 2, 196624, 327680, 4, 16, 262144, 0, 11, 65536, 0, 12, 131072, 0, 65548, 196608, 2, 65549, 196608, 2, 65550, 196608, 2, 131087, 196608, 2, 655361, 65536, 0, 655362, 131072, 0, 655363, 196608, 0, 655364, 262144, 0, 720900, 327680, 2, 786436, 327680, 4, 720897, 0, 2, 786433, 0, 4, 786434, 131072, 5, 786435, 131072, 5, 720898, 262144, 3, 720899, 262144, 3, 131085, 196608, 2, 131086, 196608, 2, -196609, 458752, 4, -131073, 458752, 5, -262144, 524288, 4, -196608, 524288, 5, -327672, 458752, 4, -262136, 458752, 5, -327671, 524288, 4, -262135, 524288, 5, -327676, 196608, 5, -327675, 262144, 5, -458749, 65536, 0, -393213, 0, 3, -327677, 65536, 5, -458748, 131072, 0, -393212, 262144, 2, -458747, 262144, 0, -393211, 327680, 3)
layer_1/tile_data = PackedInt32Array(-65531, 65536, 0, -65530, 131072, 0, -65534, 262144, 0, -131070, 65536, 0, -131069, 131072, 0, -131068, 196608, 0, -131067, 262144, 0, -1, 65536, 0, -65536, 131072, 0, -65535, 196608, 0, -65528, 262144, 0, -65529, 196608, 0)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="TileMap"]
position = Vector2(2340, 1780)
navigation_polygon = SubResource("NavigationPolygon_80xbw")

[node name="FirstBoss" parent="." node_paths=PackedStringArray("shooting_marks", "powerful_attack_mark") instance=ExtResource("2_7ptwo")]
position = Vector2(726.4, -76.72)
shooting_marks = [NodePath("../ShootingMarks/ShootingMark_1"), NodePath("../ShootingMarks/ShootingMark_2"), NodePath("../ShootingMarks/ShootingMark_3"), NodePath("../ShootingMarks/ShootingMark_4")]
powerful_attack_mark = NodePath("../ShootingMarks/PowerfulAttackMark")
player_control = false

[node name="Player" parent="." node_paths=PackedStringArray("camera2d") instance=ExtResource("3_c77s1")]
position = Vector2(726.4, 351)
collision_mask = 6
player_speed = 300.0
magnitude_parry = 900.0
camera2d = NodePath("Camera2D")
attack_light = 1.07
attack_dark = 3.5
defense_light = 80.0
defense_dark = 95.0
enemy_bullet_damage_multiply = 1.9
magnitude_parry_enemy = 900.0

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(0, 3)
position_smoothing_enabled = true
script = ExtResource("8_bhp4l")

[node name="GPUParticles2D2" type="GPUParticles2D" parent="Player"]
position = Vector2(5.00002, 5)
rotation = 1.5708
amount = 30
process_material = SubResource("ParticleProcessMaterial_glq4y")
texture = ExtResource("6_72271")

[node name="Fog" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_bnix1")
position = Vector2(754.5, 486.5)
scale = Vector2(14.988, 11.388)
texture = ExtResource("8_oq80l")

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
stream = ExtResource("5_dmkg8")
bus = &"Music"

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
color = Color(0, 0.258824, 0.101961, 1)

[node name="ShootingMarks" type="Node2D" parent="."]

[node name="ShootingMark_1" type="Marker2D" parent="ShootingMarks"]
position = Vector2(-52, 120)

[node name="ShootingMark_2" type="Marker2D" parent="ShootingMarks"]
position = Vector2(1482, 1266)

[node name="ShootingMark_3" type="Marker2D" parent="ShootingMarks"]
position = Vector2(1420, 195)

[node name="ShootingMark_4" type="Marker2D" parent="ShootingMarks"]
position = Vector2(383, 1111)

[node name="PowerfulAttackMark" type="Marker2D" parent="ShootingMarks"]
position = Vector2(770, 597)
